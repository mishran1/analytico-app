<script>
	(function(w,d,s,g,js,fs){
	    g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(f){this.q.push(f);}};
	    js=d.createElement(s);fs=d.getElementsByTagName(s)[0];
	    js.src='https://apis.google.com/js/platform.js';
	    fs.parentNode.insertBefore(js,fs);js.onload=function(){g.load('analytics');};
	}(window,document,'script'));
</script>

<!-- Include the ViewSelector2 component script. -->
<script src="analytics/public/javascript/embed-api/components/view-selector2.js"></script>

<!-- Include the DateRangeSelector component script. -->
<script src="analytics/public/javascript/embed-api/components/date-range-selector.js"></script>

<!-- Include the ActiveUsers component script. -->
<script src="analytics/public/javascript/embed-api/components/active-users.js"></script>


<!-- Include the CSS that styles the charts. -->
<link rel="stylesheet" href="analytics/public/css/chartjs-visualizations.css">
<div class="page-header">
	<a class="pull-right btn btn-primary" ng-click="addWidget()"><i class="glyphicon glyphicon-plus"></i> Add Widget</a>
	<a class="pull-right btn btn-warning" ng-click="clear()"><i class="glyphicon glyphicon-trash"></i> Clear</a>
	<h1>Dashboard</h1>
	<div id="embed-api-auth-container"></div>

	<!-- GA logout -->
	<a target="signOutFrame" href="https://accounts.google.com/logout">Sign Out</a>

	<!-- Hidden iFrame to access GA logout page -->
	<iframe name="signOutFrame" class="hidden"></iframe>

	<div id="view-selector-container" class="hidden"></div>
	<div id="date-range-selector-container" class="hidden"></div>
	<div id="view-name" class="hidden"></div>
	<div id="active-users-container" class="hidden"></div>
</div>

<div gridster="gridsterOptions">
	<!-- <ul> -->
		<li gridster-item="widget" ng-repeat="widget in dashboard.widgets" >
			<div class="box" ng-controller="CustomWidgetCtrl">
				<div class="box-header">
					<h3>{{ widget.name }}</h3>
					<div class="box-header-btns pull-right">
						<a title="settings" ng-click="openSettings(widget)"><i class="glyphicon glyphicon-cog"></i></a>
						<a title="Remove widget" ng-click="remove(widget)"><i class="glyphicon glyphicon-trash"></i></a>
					</div> 
				</div>
				<div style="width: 100%; height: calc(100% - 47px);" id="mc-container-{{widget.index}}">
				</div>
			</div>	
		</li>

		<div ng-style="resizeWithOffset(165)" 
		       resize
		     notifier="notifyServiceOnChange(params)">
		</div>
	<!-- </ul> -->
</div>
<div id="chart-top-products" ng-app="app"></div>